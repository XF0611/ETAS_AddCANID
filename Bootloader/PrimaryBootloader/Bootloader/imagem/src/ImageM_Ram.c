/*********************************************************************************************************************
*
* Description:     
* FileName:        ImageM_Ram.c
* Company:         ETAS GmbH (www.etas.com)
*
**********************************************************************************************************************
*
* COPYRIGHT RESERVED, Copyright ETAS GmbH 2021. All rights reserved, also regarding any disposal,
* exploitation, reproduction, editing, distribution, as well as in the event of applications
* for industrial property rights.
*
**********************************************************************************************************************
* History:
**********************************************************************************************************************
* Author        Date            Comment
**********************************************************************************************************************
UCN1HC          2021/25/12      initial commit
**********************************************************************************************************************/


/*********************************************************************************************************************
* Includes
*********************************************************************************************************************/
#include "ImageM_StreamFlash.h"
#include "rba_BswSrv.h"
#include "ImageM_FlashArea.h"
#include "ImageM_Config.h"
/*********************************************************************************************************************
* Local Defines
*********************************************************************************************************************/

/*********************************************************************************************************************
* Local Macros
*********************************************************************************************************************/
#ifndef MEM_COPY
#define MEM_COPY(pDest, pSrc, u32_NumBytes)    rba_BswSrv_MemCopy(pDest, pSrc, u32_NumBytes)
#else
#define MEM_COPY(pDest, pSrc, u32_NumBytes)
#endif
/*********************************************************************************************************************
* Local Types
*********************************************************************************************************************/

/*********************************************************************************************************************
* Local Variables
*********************************************************************************************************************/

/*********************************************************************************************************************
* Local Functions Prototypes
*********************************************************************************************************************/

/*********************************************************************************************************************
* Local Functions Implementation
*********************************************************************************************************************/

Std_ReturnType ImageM_RamCopy(ImageM_StreamFlashType *StreamFlashPtr, const uint8 *Data, uint32 Len, uint32 Offset)   /* PRQA S 3673 */
{
    const ImageM_FlashAreaType *Fa;
    Std_ReturnType Ret = E_NOT_OK;

    if(IMAGEM_IMAGE_SBL_ID == StreamFlashPtr->Area.FlashAreaId)
    {
        if(E_OK == ImageM_FlashPort_Open(StreamFlashPtr->Area.FlashAreaId,&Fa))
        {
            MEM_COPY((void*)(Fa->Address + Offset) , (const void*)Data, Len);                             /* PRQA S 0306 */  /* PRQA S 3200 */
            Ret = E_OK;
        }
    }

    return Ret;
}
