/*********************************************************************************************************************
*
* Description:     
* FileName:        ImageM_ImageUpdate.c
* Company:         ETAS GmbH (www.etas.com)
*
**********************************************************************************************************************
*
* COPYRIGHT RESERVED, Copyright ETAS GmbH 2021. All rights reserved, also regarding any disposal,
* exploitation, reproduction, editing, distribution, as well as in the event of applications
* for industrial property rights.
*
**********************************************************************************************************************
* History:
**********************************************************************************************************************
* Author        Date            Comment
**********************************************************************************************************************
UCN1HC          2021/25/12      initial commit
**********************************************************************************************************************/


/*********************************************************************************************************************
* Includes
*********************************************************************************************************************/
#include "ImageM_ImageUpdate.h"
#include "ImageM_ImageUpdateStatus.h"
#include "EcuMgt.h"
//#include "ImageM_ImageDualBank.h"
/*********************************************************************************************************************
* Local Defines
*********************************************************************************************************************/
#define IMAGEM_APPLICATION_EXECUTE_ADDRESS  0x80080100U

#define IMAGEM_REPROGRAMMING_REQUEST_FLAG_STATE_ON   ((ImageM_ReprogrammingRequestFlagType)0xB5B6B7B8U)
#define IMAGEM_REPROGRAMMING_REQUEST_FLAG_STATE_OFF  ((ImageM_ReprogrammingRequestFlagType)0x00U)

#define IMAGEM_APPLICATION_VALID_FLAG_STATE_ON   ((ImageM_ApplicationValidFlagType)0xA5A6A7A8U)
#define IMAGEM_APPLICATION_VALID_FLAG_STATE_OFF  ((ImageM_ApplicationValidFlagType)0x00U)

#define IMAGEM_PBL_VALID_FLAG_STATE_ON   ((ImageM_PBLValidFlagType)0xC5C6C7C8U)
#define IMAGEM_PBL_VALID_FLAG_STATE_OFF  ((ImageM_PBLValidFlagType)0x00U)
#define CURRENT_IMAGE(State, Slot)  State->Images[State->CurrImageIdx][Slot]        /* PRQA S 3410 */

#define PRIMARY_BOOTLOADER_IMAGE_ID IMAGEM_IMAGE_PRIMARY(0u)
#define APPLICATION_IMAGE_ID        IMAGEM_IMAGE_PRIMARY(1u)

#ifdef IMAGEM_SWAP_USING_HW_DUALBANK           
/*********************************************************************************************************************
* Local Macros
*********************************************************************************************************************/
#define IMAGEM_RETURN_ON_FAIL(ret)  if(ret == E_NOT_OK) return E_NOT_OK     /* PRQA S 3410 */
/*********************************************************************************************************************
* Local Types
*********************************************************************************************************************/

/*********************************************************************************************************************
* Local Variables
*********************************************************************************************************************/

/*********************************************************************************************************************
* Local Functions Prototypes
*********************************************************************************************************************/

/*********************************************************************************************************************
* Local Functions Implementation
*********************************************************************************************************************/

/*********************************************************************************************************************
* Exported Variables Implementation
*********************************************************************************************************************/

/*********************************************************************************************************************
* Exported Functions Implementation
*********************************************************************************************************************/

#endif
