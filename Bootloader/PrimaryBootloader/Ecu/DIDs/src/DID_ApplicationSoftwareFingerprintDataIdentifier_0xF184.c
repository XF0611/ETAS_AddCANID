/*********************************************************************************************************************
*
* Description:     
* FileName:        SWDL_CheckConditionsForEnteringProgrammingSession_0x0215.c
* Company:         ETAS GmbH (www.etas.com)
*
**********************************************************************************************************************
*
* COPYRIGHT RESERVED, Copyright ETAS GmbH 2021. All rights reserved, also regarding any disposal,
* exploitation, reproduction, editing, distribution, as well as in the event of applications
* for industrial property rights.
*
**********************************************************************************************************************
* History:
**********************************************************************************************************************
* Author        Date            Comment
**********************************************************************************************************************
UCN1HC          2021/25/12      initial commit
**********************************************************************************************************************/


/*********************************************************************************************************************
* Includes
*********************************************************************************************************************/
#include "Dcm.h"
#include "DID_FingerprintDataIdentifier.h"
/*********************************************************************************************************************
* Local Defines
*********************************************************************************************************************/

/*********************************************************************************************************************
* Local Macros
*********************************************************************************************************************/

/*********************************************************************************************************************
* Local Types
*********************************************************************************************************************/

/*********************************************************************************************************************
* Local Variables
*********************************************************************************************************************/

/*********************************************************************************************************************
* Local Functions Prototypes
*********************************************************************************************************************/

/*********************************************************************************************************************
* Local Functions Implementation
*********************************************************************************************************************/

/*********************************************************************************************************************
* Exported Variables Implementation
*********************************************************************************************************************/

/*********************************************************************************************************************
* Exported Functions Implementation
*********************************************************************************************************************/
Std_ReturnType DID_ApplicationSoftwareFingerprintDataIdentifier_0xF184_ReadFunc (Dcm_OpStatusType OpStatus,uint8 * Data)                       /* PRQA S 3206, 1503 */
{
    Std_ReturnType Ret = E_NOT_OK;
    Ret = DIDService_ReadFingerPrintInfor(ApplicationSoftwareFingerprint,Data);
    return Ret;
}

FUNC(Std_ReturnType,DCM_APPL_CODE) DID_ApplicationSoftwareFingerprintDataIdentifier_0xF184_WriteFunc (P2CONST(uint8,AUTOMATIC,DCM_INTERN_DATA) Data,     /* PRQA S 3206, 1503, 3408 */        
                                                                    VAR(Dcm_OpStatusType,AUTOMATIC) OpStatus,           /* PRQA S 3206 */ /* This function does not use this parameter */
                                                                    P2VAR(Dcm_NegativeResponseCodeType,
                                                                    AUTOMATIC,DCM_INTERN_DATA) ErrorCode)
{
    Std_ReturnType retVal = E_NOT_OK;

    *ErrorCode = DCM_E_INCORRECTMESSAGELENGTHORINVALIDFORMAT;
    retVal = EcuMgr_Util_IsDateFormatValid(Data, ECUMGR_UTIL_LEN_OF_YYMMDD_FORMAT);

    if(retVal == E_OK)
    {
      retVal = DIDService_WriteFingerprint(ApplicationSoftwareFingerprint,Data);
    }  
    
    if(E_OK == retVal)
    {
    	*ErrorCode = E_OK;
    }

    return retVal;
}
